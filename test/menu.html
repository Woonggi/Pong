<!DOCTYPE html>
<html lang="en">
<head>
    <meat charset="utf-8"></meat>
    <title>Lobby</title>
    <style>
        .center-contents {
            font-family :'Courier New';
            text-align: center;
        }
        .username_input {
            padding-bottom: 15px;
        }
        h1 {
            font-size: 100px;
            padding-top: 50px;
            padding-bottom: 50;
        }
    </style>
</head>
</html>
<body>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io('/menu');
        function join_public() {
            let username = document.getElementById("username").value;
            if(username == null || username == "") {
                alert("Enter your username");
                return;
            }

            socket.emit('join_public', username)
            socket.on('public_validation', (validate, message) => {
                if (validate == 1) {
                    window.location.href = 'public/' + username;
                } else {
                    alert(message);
                    return;
                }
            });
        }
        function create_private() {
            let username = document.getElementById("username").value;
            if (username == null || username == "") {
                alert("Enter your username")
                return;
            } 

            let room_code = window.prompt("Enter the room code to create", "");
            if(room_code == null || room_code == "") {
                alert("Room code is empty");
                return;
            } 

            socket.emit('create_private', username, room_code)
            socket.on('create_validation', (validate, message) => {
                if (validate == 1) {
                    window.location.href = 'private/' + room_code + '/' + username;
                } else {
                    alert(message);
                    return;
                }
            });
        }
        
        function join_private() {
            let username = document.getElementById("username").value;
            if (username == null || username == "") {
                alert("Enter your username")
                return;
            } 

            let room_code = window.prompt("Enter the room code to join", "");
            if(room_code == null || room_code == "") {
                alert("Room code is empty");
                return;
            } 
            socket.emit('join_private', username ,room_code);
            socket.on('join_validation', (validate, message) => {
                if (validate == true) {
                    window.location.href = 'private/' + room_code + '/' + username;
                } else {
                    alert(message);
                    return;
                }
            })
        }

        function mOver(obj) {
            obj.style.fontSize = "25px";
            obj.innerHTML =  " \
            <b><br />Created at</b> <br /> \
            DigiPen Institutue of Technology<br /><br /> \
            <b>* PRESIDENT *</b><br /> \
            Claude Comair<br /><br /> \
            <b>* FACULTY *</b><br />\
            Matthew Picioccio<br /> \
            Andrew Kaplan <br /> \
            Jen Sward<br />\
            <br /><br /><br /><br /><br /><br /> \
            <small>WWW.DIGIPEN.EDU <br />\
            COPYRIGHT Â© 2020 BY DIGIPEN (USA), LLC. ALL RIGHTS RESERVED</small><br />\
            "
        }
        function mOut(obj) {
            obj.style.fontSize = "30px"
            obj.innerHTML = "<u><br/>Credit<u>"
        }

    </script>

    <div class="center-contents">
        <h1>Pong</h1>
        <div class="username_input">
            <input class="inputbox" id="username" name="username" type="text" placeholder="username">
        </div>
        <button onclick="join_public();">Join Public Game</button>
        <button onclick="create_private();">Create Private Game</button>
        <button onclick="join_private();">Join Private Game</button>
        <div class="credit" onmouseover="mOver(this)" onmouseout="mOut(this)" 
        style="font-size: 30px; height: 150px; margin: 0 auto;"><u><br/>Credit</u></div>
        <img src="images/DigiPen_Logo.png">
    </div>
</body>